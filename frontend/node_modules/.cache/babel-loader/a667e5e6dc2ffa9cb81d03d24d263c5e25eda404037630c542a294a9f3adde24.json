{"ast":null,"code":"var _jsxFileName = \"/Users/ang/V_Hack_Ver4/frontend2/src/components/screens/ProfileScreen.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport supabase from '../supabaseClient';\nimport { useAuth } from '../AuthProvider';\nimport ProfileSummaryCard from './profile/ProfileSummaryCard';\nimport ProfileTabs from './profile/ProfileTabs';\nimport AccountTab from './profile/tabs/AccountTab';\nimport HealthTab from './profile/tabs/HealthTab';\nimport PreferencesTab from './profile/tabs/PreferencesTab';\nimport PrivacyTab from './profile/tabs/PrivacyTab';\nimport ProfileNotification from './profile/components/ProfileNotification';\n\n// Demo account data cache - used to avoid database queries for demo accounts\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEMO_PROFILE_CACHE = {\n  'demo@healthsync.com': {\n    name: \"Demo User\",\n    email: \"demo@healthsync.com\",\n    avatar: \"/User_4.png\",\n    dob: \"1990-01-01\",\n    gender: \"Female\",\n    height: \"170\",\n    weight: \"65\",\n    bloodType: \"A+\",\n    allergies: [\"Peanuts\", \"Penicillin\"],\n    conditions: [\"Asthma\", \"Seasonal allergies\"],\n    goalSteps: 10000,\n    goalSleep: 8,\n    goalWater: 2000\n  },\n  'doctor@healthsync.com': {\n    name: \"Dr. Johnson\",\n    email: \"doctor@healthsync.com\",\n    avatar: \"/User_3.png\",\n    dob: \"1985-05-15\",\n    gender: \"Male\",\n    height: \"182\",\n    weight: \"78\",\n    bloodType: \"O+\",\n    allergies: [\"Latex\"],\n    conditions: [\"None\"],\n    goalSteps: 8000,\n    goalSleep: 7,\n    goalWater: 2500\n  }\n};\nconst ProfileScreen = ({\n  colors,\n  setActiveScreen,\n  setIsAuthenticated,\n  preferences,\n  handleToggle\n}) => {\n  _s();\n  const [activeTab, setActiveTab] = useState('account');\n  const [hoveredTab, setHoveredTab] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // Get authenticated user from context - now also check if demo account\n  const {\n    user,\n    signOut,\n    isDemoAccount\n  } = useAuth();\n\n  // User data state\n  const [userData, setUserData] = useState({\n    name: \"\",\n    email: \"\",\n    avatar: \"/User_4.png\",\n    dob: \"\",\n    gender: \"\",\n    height: \"\",\n    weight: \"\",\n    bloodType: \"\",\n    allergies: [],\n    conditions: [],\n    goalSteps: 10000,\n    goalSleep: 8,\n    goalWater: 2000\n  });\n\n  // Add a state to track queries in progress\n  const [queriesInProgress, setQueriesInProgress] = useState(0);\n\n  // Mouse position for 3D effects\n  const [mousePosition, setMousePosition] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // Sassy tips\n  const [sassyTip, setSassyTip] = useState('');\n  const sassyTips = [\"Drinking more water might help with those headaches... or it might just make you visit the bathroom more often.\", \"Your sleep pattern looks like my WiFi signal - occasionally strong but mostly unreliable.\", \"Congrats on taking 10,000 steps yesterday! Your couch must be feeling neglected.\", \"Your heart rate during your last workout suggests you're either getting fitter or saw someone attractive walk by.\", \"According to your data, you've spent more time scrolling through this app than actually exercising.\", \"Your medication adherence is impressive! If only you remembered to call your mother that consistently.\", \"Your blood pressure readings are as stable as my dating life - wildly unpredictable.\", \"Based on your activity, I'm prescribing less Netflix and more movement. Just a suggestion, I'm not your mom.\", \"Your stress levels seem high. Have you tried yoga? Or just screaming into a pillow? Both work.\"];\n\n  // Fetch user data from Supabase when component mounts\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.id) {\n      // Log the starting timestamp for performance measurement\n      console.log(`Starting profile data fetch at ${new Date().toISOString()}`);\n      const startTime = performance.now();\n\n      // Check if this is a demo account - use cached data if so\n      if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n        console.log('Using cached profile data for demo account');\n        const demoData = DEMO_PROFILE_CACHE[user.email] || DEMO_PROFILE_CACHE['demo@healthsync.com'];\n        setUserData({\n          ...userData,\n          ...demoData\n        });\n        setIsLoading(false);\n        return;\n      }\n      fetchUserData().then(() => {\n        const endTime = performance.now();\n        console.log(`Profile data fetch completed in ${Math.round(endTime - startTime)}ms`);\n      });\n    }\n  }, [user]);\n\n  // Fetch user profile data from Supabase\n  const fetchUserData = async () => {\n    setIsLoading(true);\n    setErrorMessage('');\n    setQueriesInProgress(4); // We're going to make 4 different queries\n\n    try {\n      var _userData$data, _userData$data2, _userData$data3, _profileData$data, _profileData$data2, _profileData$data3, _profileData$data3$he, _profileData$data4, _profileData$data4$we, _profileData$data5, _allergiesData$data, _conditionsData$data, _profileData$data6, _profileData$data7, _profileData$data8;\n      // Use Promise.all to perform all queries concurrently instead of sequentially\n      // This should significantly reduce the total fetch time\n      const [userData, profileData, conditionsData, allergiesData] = await Promise.all([\n      // User data\n      fetchWithTimeout(supabase.from('users').select('*').eq('user_id', user.id).single(), 3000).then(result => {\n        setQueriesInProgress(prev => prev - 1);\n        return result;\n      }).catch(error => {\n        console.error('Error fetching user data:', error);\n        setQueriesInProgress(prev => prev - 1);\n        return {\n          data: null,\n          error\n        };\n      }),\n      // Profile metrics\n      fetchWithTimeout(supabase.from('user_profile_metrics').select('*').eq('user_id', user.id).single(), 3000).then(result => {\n        setQueriesInProgress(prev => prev - 1);\n        return result;\n      }).catch(error => {\n        console.error('Error fetching profile metrics:', error);\n        setQueriesInProgress(prev => prev - 1);\n        return {\n          data: null,\n          error: null\n        }; // Continue even if this fails\n      }),\n      // User conditions\n      fetchWithTimeout(supabase.from('user_conditions').select('condition_name').eq('user_id', user.id), 3000).then(result => {\n        setQueriesInProgress(prev => prev - 1);\n        return result;\n      }).catch(error => {\n        console.error('Error fetching conditions:', error);\n        setQueriesInProgress(prev => prev - 1);\n        return {\n          data: [],\n          error: null\n        }; // Default to empty array\n      }),\n      // User allergies\n      fetchWithTimeout(supabase.from('user_allergies').select('allergy_name').eq('user_id', user.id), 3000).then(result => {\n        setQueriesInProgress(prev => prev - 1);\n        return result;\n      }).catch(error => {\n        console.error('Error fetching allergies:', error);\n        setQueriesInProgress(prev => prev - 1);\n        return {\n          data: [],\n          error: null\n        }; // Default to empty array\n      })]);\n\n      // Check if basic user data was retrieved successfully\n      if (userData.error) throw userData.error;\n\n      // If there's profile data, update the state with it\n      const newUserData = {\n        name: ((_userData$data = userData.data) === null || _userData$data === void 0 ? void 0 : _userData$data.name) || \"\",\n        email: ((_userData$data2 = userData.data) === null || _userData$data2 === void 0 ? void 0 : _userData$data2.email) || \"\",\n        avatar: ((_userData$data3 = userData.data) === null || _userData$data3 === void 0 ? void 0 : _userData$data3.avatar_url) || \"/User_4.png\",\n        dob: ((_profileData$data = profileData.data) === null || _profileData$data === void 0 ? void 0 : _profileData$data.date_of_birth) || \"\",\n        gender: ((_profileData$data2 = profileData.data) === null || _profileData$data2 === void 0 ? void 0 : _profileData$data2.gender) || \"\",\n        height: ((_profileData$data3 = profileData.data) === null || _profileData$data3 === void 0 ? void 0 : (_profileData$data3$he = _profileData$data3.height_cm) === null || _profileData$data3$he === void 0 ? void 0 : _profileData$data3$he.toString()) || \"\",\n        weight: ((_profileData$data4 = profileData.data) === null || _profileData$data4 === void 0 ? void 0 : (_profileData$data4$we = _profileData$data4.weight_kg) === null || _profileData$data4$we === void 0 ? void 0 : _profileData$data4$we.toString()) || \"\",\n        bloodType: ((_profileData$data5 = profileData.data) === null || _profileData$data5 === void 0 ? void 0 : _profileData$data5.blood_type) || \"\",\n        allergies: ((_allergiesData$data = allergiesData.data) === null || _allergiesData$data === void 0 ? void 0 : _allergiesData$data.map(a => a.allergy_name)) || [],\n        conditions: ((_conditionsData$data = conditionsData.data) === null || _conditionsData$data === void 0 ? void 0 : _conditionsData$data.map(c => c.condition_name)) || [],\n        goalSteps: ((_profileData$data6 = profileData.data) === null || _profileData$data6 === void 0 ? void 0 : _profileData$data6.goal_steps) || 10000,\n        goalSleep: ((_profileData$data7 = profileData.data) === null || _profileData$data7 === void 0 ? void 0 : _profileData$data7.goal_sleep_hours) || 8,\n        goalWater: ((_profileData$data8 = profileData.data) === null || _profileData$data8 === void 0 ? void 0 : _profileData$data8.goal_water_ml) || 2000\n      };\n\n      // Store the retrieved profile data in localStorage for faster access next time\n      try {\n        localStorage.setItem(`profile_cache_${user.id}`, JSON.stringify({\n          data: newUserData,\n          timestamp: Date.now()\n        }));\n      } catch (e) {\n        // Ignore storage errors\n        console.log('Error caching profile data:', e);\n      }\n      setUserData(newUserData);\n    } catch (error) {\n      console.error('Error fetching user data:', error.message);\n      setErrorMessage('Failed to load profile data. Please try again later.');\n\n      // Try to use cached data if available\n      try {\n        const cachedData = localStorage.getItem(`profile_cache_${user.id}`);\n        if (cachedData) {\n          const parsed = JSON.parse(cachedData);\n          if (parsed.data) {\n            console.log('Using cached profile data due to fetch error');\n            setUserData(parsed.data);\n          }\n        }\n      } catch (e) {\n        // Ignore cache errors\n        console.log('Error reading cached profile data:', e);\n      }\n    } finally {\n      // Only set loading to false when all queries are complete\n      if (queriesInProgress === 0) {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  // Helper function for request timeouts\n  const fetchWithTimeout = async (promise, timeoutMs = 5000) => {\n    let timer;\n    const timeoutPromise = new Promise((_, reject) => {\n      timer = setTimeout(() => reject(new Error('Request timed out')), timeoutMs);\n    });\n    try {\n      const result = await Promise.race([promise, timeoutPromise]);\n      clearTimeout(timer);\n      return result;\n    } catch (error) {\n      clearTimeout(timer);\n      throw error;\n    }\n  };\n\n  // Effect to turn off loading when all queries complete\n  useEffect(() => {\n    if (queriesInProgress === 0 && isLoading) {\n      setIsLoading(false);\n    }\n  }, [queriesInProgress]);\n\n  // Save user data to Supabase\n  const saveUserData = async () => {\n    // If demo account, just show success UI without saving\n    if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n      return;\n    }\n    setIsLoading(true);\n    setErrorMessage('');\n    try {\n      // Update user table\n      const {\n        error: userError\n      } = await supabase.from('users').update({\n        name: userData.name\n        // Note: Email updates may require additional verification\n      }).eq('user_id', user.id);\n      if (userError) throw userError;\n\n      // Check if user_profile_metrics record exists\n      const {\n        data: existingProfile\n      } = await supabase.from('user_profile_metrics').select('user_profile_id').eq('user_id', user.id).single();\n\n      // Prepare profile metrics data\n      const profileData = {\n        user_id: user.id,\n        date_of_birth: userData.dob || null,\n        gender: userData.gender || null,\n        blood_type: userData.bloodType || null,\n        height_cm: userData.height ? parseInt(userData.height) : null,\n        weight_kg: userData.weight ? parseInt(userData.weight) : null,\n        goal_steps: userData.goalSteps,\n        goal_sleep_hours: userData.goalSleep,\n        goal_water_ml: userData.goalWater,\n        updated_at: new Date().toISOString()\n      };\n\n      // Update or insert profile metrics\n      if (existingProfile) {\n        const {\n          error: updateError\n        } = await supabase.from('user_profile_metrics').update(profileData).eq('user_id', user.id);\n        if (updateError) throw updateError;\n      } else {\n        const {\n          error: insertError\n        } = await supabase.from('user_profile_metrics').insert([profileData]);\n        if (insertError) throw insertError;\n      }\n\n      // Handle conditions - first delete existing ones\n      await supabase.from('user_conditions').delete().eq('user_id', user.id);\n\n      // Then insert new conditions\n      if (userData.conditions.length > 0) {\n        const conditionsToInsert = userData.conditions.map(condition => ({\n          user_id: user.id,\n          condition_name: condition,\n          created_at: new Date().toISOString()\n        }));\n        const {\n          error: conditionsError\n        } = await supabase.from('user_conditions').insert(conditionsToInsert);\n        if (conditionsError) throw conditionsError;\n      }\n\n      // Handle allergies - first delete existing ones\n      await supabase.from('user_allergies').delete().eq('user_id', user.id);\n\n      // Then insert new allergies\n      if (userData.allergies.length > 0) {\n        const allergiesToInsert = userData.allergies.map(allergy => ({\n          user_id: user.id,\n          allergy_name: allergy,\n          created_at: new Date().toISOString()\n        }));\n        const {\n          error: allergiesError\n        } = await supabase.from('user_allergies').insert(allergiesToInsert);\n        if (allergiesError) throw allergiesError;\n      }\n\n      // Update local cache\n      try {\n        localStorage.setItem(`profile_cache_${user.id}`, JSON.stringify({\n          data: userData,\n          timestamp: Date.now()\n        }));\n      } catch (e) {\n        // Ignore storage errors\n      }\n\n      // Show success message\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n    } catch (error) {\n      console.error('Error saving user data:', error);\n      setErrorMessage('Failed to save profile changes. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Save preferences to Supabase\n  const savePreferences = async updatedPrefs => {\n    // For demo accounts, just update local state without database calls\n    if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n      return;\n    }\n    try {\n      // Check if user_preferences record exists\n      const {\n        data: existingPrefs\n      } = await supabase.from('user_preferences').select('user_preferences_id').eq('user_id', user.id).single();\n\n      // Prepare preferences data\n      const prefsData = {\n        user_id: user.id,\n        enable_notifications: updatedPrefs.notifications,\n        enable_reminders: updatedPrefs.reminders,\n        enable_biometrics: updatedPrefs.biometrics,\n        enable_dark_mode: updatedPrefs.darkMode,\n        enable_data_sharing: updatedPrefs.dataSharing,\n        updated_at: new Date().toISOString()\n      };\n\n      // Update or insert preferences\n      if (existingPrefs) {\n        await supabase.from('user_preferences').update(prefsData).eq('user_id', user.id);\n      } else {\n        await supabase.from('user_preferences').insert([prefsData]);\n      }\n    } catch (error) {\n      console.error('Error saving preferences:', error);\n    }\n  };\n\n  // Handle preference toggles and save to Supabase\n  const handlePreferenceToggle = key => {\n    const updatedPrefs = {\n      ...preferences,\n      [key]: !preferences[key]\n    };\n\n    // Toggle the local state\n    handleToggle(key);\n\n    // Save to Supabase\n    if (user !== null && user !== void 0 && user.id) {\n      savePreferences(updatedPrefs);\n    }\n  };\n  useEffect(() => {\n    // Set a random sassy tip only once when the component mounts\n    const randomTip = sassyTips[Math.floor(Math.random() * sassyTips.length)];\n    setSassyTip(randomTip);\n    const handleMouseMove = e => {\n      const {\n        clientX,\n        clientY\n      } = e;\n      const x = clientX / window.innerWidth - 0.5;\n      const y = clientY / window.innerHeight - 0.5;\n      setMousePosition({\n        x,\n        y\n      });\n    };\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, []);\n  const handleLogout = async () => {\n    try {\n      await signOut();\n      setIsAuthenticated(false);\n      setActiveScreen('signin');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n  const handleSave = () => {\n    if (user !== null && user !== void 0 && user.id) {\n      saveUserData();\n    } else {\n      // Demo mode or no user ID - just show success UI\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n    }\n  };\n\n  // Add a condition\n  const addCondition = condition => {\n    if (condition && !userData.conditions.includes(condition)) {\n      setUserData({\n        ...userData,\n        conditions: [...userData.conditions, condition]\n      });\n    }\n  };\n\n  // Remove a condition\n  const removeCondition = condition => {\n    setUserData({\n      ...userData,\n      conditions: userData.conditions.filter(c => c !== condition)\n    });\n  };\n\n  // Add an allergy\n  const addAllergy = allergy => {\n    if (allergy && !userData.allergies.includes(allergy)) {\n      setUserData({\n        ...userData,\n        allergies: [...userData.allergies, allergy]\n      });\n    }\n  };\n\n  // Remove an allergy\n  const removeAllergy = allergy => {\n    setUserData({\n      ...userData,\n      allergies: userData.allergies.filter(a => a !== allergy)\n    });\n  };\n\n  // Generate a random number between min and max\n  const random = (min, max) => Math.random() * (max - min) + min;\n\n  // Generate a set of floating orbs for background\n  const generateOrbs = count => {\n    return [...Array(count)].map((_, i) => ({\n      id: i,\n      size: random(50, 120),\n      x: random(0, 100),\n      y: random(0, 100),\n      delay: random(0, 5),\n      duration: random(15, 25)\n    }));\n  };\n  const orbs = generateOrbs(6);\n\n  // Show a simplified loading state UI\n  if (isLoading && !userData.name) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 h-full flex flex-col items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 mb-4 relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 rounded-full border-4 border-blue-200 opacity-25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-blue-200\",\n          children: \"Loading your profile...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 pb-8 h-full overflow-auto relative dark-mode-transition\",\n    style: {\n      background: `radial-gradient(circle at 70% 20%, ${colors.primary}20, transparent 50%),\n                       radial-gradient(circle at 30% 80%, ${colors.accent}20, transparent 50%)`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 overflow-hidden pointer-events-none\",\n      children: orbs.map(orb => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute rounded-full opacity-10 dark-mode-transition\",\n        style: {\n          width: orb.size + 'px',\n          height: orb.size + 'px',\n          left: orb.x + '%',\n          top: orb.y + '%',\n          background: `linear-gradient(135deg, ${colors.primary}80, ${colors.accent}60)`,\n          filter: 'blur(20px)',\n          animation: `floatOrb ${orb.duration}s ease-in-out infinite`,\n          animationDelay: `${orb.delay}s`,\n          transform: `translate3d(${mousePosition.x * -15}px, ${mousePosition.y * -15}px, 0)`\n        }\n      }, orb.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex justify-between items-center mb-8 z-10 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold bg-gradient-to-br from-white via-blue-300 to-blue-500 bg-clip-text text-transparent\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-blue-200\",\n          children: \"Manage your account or whatever\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 relative overflow-hidden group tooltip-container\",\n        style: {\n          background: `linear-gradient(135deg, ${colors.danger}, ${colors.gradientAlt2})`,\n          boxShadow: `0 0 15px ${colors.danger}40`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tooltip\",\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-black bg-opacity-20 scale-0 group-hover:scale-100 transition-transform duration-300 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"white\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          className: \"z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n            points: \"16 17 21 12 16 7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"21\",\n            y1: \"12\",\n            x2: \"9\",\n            y2: \"12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(ProfileNotification, {\n      message: errorMessage,\n      type: \"error\",\n      onClose: () => setErrorMessage(''),\n      colors: colors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 9\n    }, this), sassyTip && !saveSuccess && !errorMessage && /*#__PURE__*/_jsxDEV(ProfileNotification, {\n      message: sassyTip,\n      type: \"info\",\n      onClose: () => setSassyTip(''),\n      colors: colors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 9\n    }, this), saveSuccess && /*#__PURE__*/_jsxDEV(ProfileNotification, {\n      message: \"Profile updated! Looking good there, superstar.\",\n      type: \"success\",\n      colors: colors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ProfileSummaryCard, {\n      userData: userData,\n      editMode: editMode,\n      setEditMode: setEditMode,\n      handleSave: handleSave,\n      mousePosition: mousePosition,\n      colors: colors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProfileTabs, {\n      activeTab: activeTab,\n      setActiveTab: setActiveTab,\n      hoveredTab: hoveredTab,\n      setHoveredTab: setHoveredTab,\n      colors: colors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -inset-4 rounded-3xl opacity-10 bg-blue-500 blur-2xl dark-mode-transition\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative p-6 rounded-2xl backdrop-blur-md border border-white border-opacity-10 min-h-[400px] dark-mode-transition\",\n        style: {\n          background: 'rgba(13, 22, 47, 0.7)',\n          boxShadow: `0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 0 15px ${colors.primary}30`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `transition-all duration-700 ${activeTab === 'account' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`,\n          children: /*#__PURE__*/_jsxDEV(AccountTab, {\n            userData: userData,\n            setUserData: setUserData,\n            editMode: editMode,\n            colors: colors,\n            isLoading: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `transition-all duration-700 ${activeTab === 'health' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`,\n          children: /*#__PURE__*/_jsxDEV(HealthTab, {\n            userData: userData,\n            setUserData: setUserData,\n            editMode: editMode,\n            colors: colors,\n            addCondition: addCondition,\n            removeCondition: removeCondition,\n            addAllergy: addAllergy,\n            removeAllergy: removeAllergy,\n            isLoading: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 693,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `transition-all duration-700 ${activeTab === 'preferences' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`,\n          children: /*#__PURE__*/_jsxDEV(PreferencesTab, {\n            preferences: preferences,\n            handleToggle: handlePreferenceToggle,\n            colors: colors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `transition-all duration-700 ${activeTab === 'privacy' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`,\n          children: /*#__PURE__*/_jsxDEV(PrivacyTab, {\n            preferences: preferences,\n            handleToggle: handlePreferenceToggle,\n            colors: colors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes gradientShift {\n          0% { background-position: 0% 50% }\n          50% { background-position: 100% 50% }\n          100% { background-position: 0% 50% }\n        }\n        @keyframes shimmerButtonEffect {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        @keyframes shimmerEffect {\n          100% { transform: translateX(100%); }\n        }\n        @keyframes floatOrb {\n          0% { transform: translateY(0px) translateX(0px); }\n          50% { transform: translateY(-30px) translateX(20px); }\n          100% { transform: translateY(0px) translateX(0px); }\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes bounce-subtle {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-5px); }\n        }\n        .animate-fadein {\n          animation: fadeIn 0.5s ease-in-out;\n        }\n        .animate-bounce-subtle {\n          animation: bounce-subtle 4s ease-in-out infinite;\n        }\n        .tooltip-container {\n          position: relative;\n        }\n        .tooltip {\n          position: absolute;\n          top: -30px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: rgba(0, 0, 0, 0.7);\n          color: white;\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          opacity: 0;\n          transition: opacity 0.3s;\n          pointer-events: none;\n          white-space: nowrap;\n          z-index: 50;\n        }\n        .tooltip-container:hover .tooltip {\n          opacity: 1;\n        }\n        .tooltip:after {\n          content: '';\n          position: absolute;\n          top: 100%;\n          left: 50%;\n          margin-left: -5px;\n          border-width: 5px;\n          border-style: solid;\n          border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;\n        }\n        input::placeholder, select::placeholder {\n          color: rgba(255, 255, 255, 0.5);\n        }\n        input[type=\"range\"] {\n          -webkit-appearance: none;\n          height: 8px;\n          border-radius: 5px;\n          background: rgba(30, 64, 175, 0.3);\n        }\n        input[type=\"range\"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #3B82F6, #06B6D4);\n          box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n        input[type=\"range\"]::-webkit-slider-thumb:active {\n          transform: scale(1.2);\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 576,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfileScreen, \"XgFksxIm5gJAb2ifZ4wA/XsNU04=\", false, function () {\n  return [useAuth];\n});\n_c = ProfileScreen;\nexport default ProfileScreen;\nvar _c;\n$RefreshReg$(_c, \"ProfileScreen\");","map":{"version":3,"names":["React","useState","useEffect","X","supabase","useAuth","ProfileSummaryCard","ProfileTabs","AccountTab","HealthTab","PreferencesTab","PrivacyTab","ProfileNotification","jsxDEV","_jsxDEV","DEMO_PROFILE_CACHE","name","email","avatar","dob","gender","height","weight","bloodType","allergies","conditions","goalSteps","goalSleep","goalWater","ProfileScreen","colors","setActiveScreen","setIsAuthenticated","preferences","handleToggle","_s","activeTab","setActiveTab","hoveredTab","setHoveredTab","editMode","setEditMode","saveSuccess","setSaveSuccess","isLoading","setIsLoading","errorMessage","setErrorMessage","user","signOut","isDemoAccount","userData","setUserData","queriesInProgress","setQueriesInProgress","mousePosition","setMousePosition","x","y","sassyTip","setSassyTip","sassyTips","id","console","log","Date","toISOString","startTime","performance","now","demoData","fetchUserData","then","endTime","Math","round","_userData$data","_userData$data2","_userData$data3","_profileData$data","_profileData$data2","_profileData$data3","_profileData$data3$he","_profileData$data4","_profileData$data4$we","_profileData$data5","_allergiesData$data","_conditionsData$data","_profileData$data6","_profileData$data7","_profileData$data8","profileData","conditionsData","allergiesData","Promise","all","fetchWithTimeout","from","select","eq","single","result","prev","catch","error","data","newUserData","avatar_url","date_of_birth","height_cm","toString","weight_kg","blood_type","map","a","allergy_name","c","condition_name","goal_steps","goal_sleep_hours","goal_water_ml","localStorage","setItem","JSON","stringify","timestamp","e","message","cachedData","getItem","parsed","parse","promise","timeoutMs","timer","timeoutPromise","_","reject","setTimeout","Error","race","clearTimeout","saveUserData","userError","update","existingProfile","user_id","parseInt","updated_at","updateError","insertError","insert","delete","length","conditionsToInsert","condition","created_at","conditionsError","allergiesToInsert","allergy","allergiesError","savePreferences","updatedPrefs","existingPrefs","prefsData","enable_notifications","notifications","enable_reminders","reminders","enable_biometrics","biometrics","enable_dark_mode","darkMode","enable_data_sharing","dataSharing","handlePreferenceToggle","key","randomTip","floor","random","handleMouseMove","clientX","clientY","window","innerWidth","innerHeight","addEventListener","removeEventListener","handleLogout","handleSave","addCondition","includes","removeCondition","filter","addAllergy","removeAllergy","min","max","generateOrbs","count","Array","i","size","delay","duration","orbs","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","background","primary","accent","orb","width","left","top","animation","animationDelay","transform","onClick","danger","gradientAlt2","boxShadow","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","x1","y1","x2","y2","type","onClose","jsx","_c","$RefreshReg$"],"sources":["/Users/ang/V_Hack_Ver4/frontend2/src/components/screens/ProfileScreen.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport supabase from '../supabaseClient';\nimport { useAuth } from '../AuthProvider';\nimport ProfileSummaryCard from './profile/ProfileSummaryCard';\nimport ProfileTabs from './profile/ProfileTabs';\nimport AccountTab from './profile/tabs/AccountTab';\nimport HealthTab from './profile/tabs/HealthTab';\nimport PreferencesTab from './profile/tabs/PreferencesTab';\nimport PrivacyTab from './profile/tabs/PrivacyTab';\nimport ProfileNotification from './profile/components/ProfileNotification';\n\n// Demo account data cache - used to avoid database queries for demo accounts\nconst DEMO_PROFILE_CACHE = {\n  'demo@healthsync.com': {\n    name: \"Demo User\",\n    email: \"demo@healthsync.com\",\n    avatar: \"/User_4.png\",\n    dob: \"1990-01-01\",\n    gender: \"Female\",\n    height: \"170\",\n    weight: \"65\",\n    bloodType: \"A+\",\n    allergies: [\"Peanuts\", \"Penicillin\"],\n    conditions: [\"Asthma\", \"Seasonal allergies\"],\n    goalSteps: 10000,\n    goalSleep: 8,\n    goalWater: 2000\n  },\n  'doctor@healthsync.com': {\n    name: \"Dr. Johnson\",\n    email: \"doctor@healthsync.com\",\n    avatar: \"/User_3.png\",\n    dob: \"1985-05-15\",\n    gender: \"Male\",\n    height: \"182\",\n    weight: \"78\",\n    bloodType: \"O+\",\n    allergies: [\"Latex\"],\n    conditions: [\"None\"],\n    goalSteps: 8000,\n    goalSleep: 7,\n    goalWater: 2500\n  }\n};\n\nconst ProfileScreen = ({ colors, setActiveScreen, setIsAuthenticated, preferences, handleToggle }) => {\n  const [activeTab, setActiveTab] = useState('account');\n  const [hoveredTab, setHoveredTab] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  \n  // Get authenticated user from context - now also check if demo account\n  const { user, signOut, isDemoAccount } = useAuth();\n  \n  // User data state\n  const [userData, setUserData] = useState({\n    name: \"\",\n    email: \"\",\n    avatar: \"/User_4.png\",\n    dob: \"\",\n    gender: \"\",\n    height: \"\",\n    weight: \"\",\n    bloodType: \"\",\n    allergies: [],\n    conditions: [],\n    goalSteps: 10000,\n    goalSleep: 8,\n    goalWater: 2000\n  });\n  \n  // Add a state to track queries in progress\n  const [queriesInProgress, setQueriesInProgress] = useState(0);\n  \n  // Mouse position for 3D effects\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });\n  \n  // Sassy tips\n  const [sassyTip, setSassyTip] = useState('');\n  const sassyTips = [\n    \"Drinking more water might help with those headaches... or it might just make you visit the bathroom more often.\",\n    \"Your sleep pattern looks like my WiFi signal - occasionally strong but mostly unreliable.\",\n    \"Congrats on taking 10,000 steps yesterday! Your couch must be feeling neglected.\",\n    \"Your heart rate during your last workout suggests you're either getting fitter or saw someone attractive walk by.\",\n    \"According to your data, you've spent more time scrolling through this app than actually exercising.\",\n    \"Your medication adherence is impressive! If only you remembered to call your mother that consistently.\",\n    \"Your blood pressure readings are as stable as my dating life - wildly unpredictable.\",\n    \"Based on your activity, I'm prescribing less Netflix and more movement. Just a suggestion, I'm not your mom.\",\n    \"Your stress levels seem high. Have you tried yoga? Or just screaming into a pillow? Both work.\"\n  ];\n\n  // Fetch user data from Supabase when component mounts\n  useEffect(() => {\n    if (user?.id) {\n      // Log the starting timestamp for performance measurement\n      console.log(`Starting profile data fetch at ${new Date().toISOString()}`);\n      const startTime = performance.now();\n      \n      // Check if this is a demo account - use cached data if so\n      if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n        console.log('Using cached profile data for demo account');\n        const demoData = DEMO_PROFILE_CACHE[user.email] || DEMO_PROFILE_CACHE['demo@healthsync.com'];\n        \n        setUserData({\n          ...userData,\n          ...demoData\n        });\n        \n        setIsLoading(false);\n        return;\n      }\n      \n      fetchUserData().then(() => {\n        const endTime = performance.now();\n        console.log(`Profile data fetch completed in ${Math.round(endTime - startTime)}ms`);\n      });\n    }\n  }, [user]);\n  \n  // Fetch user profile data from Supabase\n  const fetchUserData = async () => {\n    setIsLoading(true);\n    setErrorMessage('');\n    setQueriesInProgress(4); // We're going to make 4 different queries\n    \n    try {\n      // Use Promise.all to perform all queries concurrently instead of sequentially\n      // This should significantly reduce the total fetch time\n      const [userData, profileData, conditionsData, allergiesData] = await Promise.all([\n        // User data\n        fetchWithTimeout(\n          supabase\n            .from('users')\n            .select('*')\n            .eq('user_id', user.id)\n            .single(),\n          3000\n        ).then(result => {\n          setQueriesInProgress(prev => prev - 1);\n          return result;\n        }).catch(error => {\n          console.error('Error fetching user data:', error);\n          setQueriesInProgress(prev => prev - 1);\n          return { data: null, error };\n        }),\n        \n        // Profile metrics\n        fetchWithTimeout(\n          supabase\n            .from('user_profile_metrics')\n            .select('*')\n            .eq('user_id', user.id)\n            .single(),\n          3000\n        ).then(result => {\n          setQueriesInProgress(prev => prev - 1);\n          return result;\n        }).catch(error => {\n          console.error('Error fetching profile metrics:', error);\n          setQueriesInProgress(prev => prev - 1);\n          return { data: null, error: null }; // Continue even if this fails\n        }),\n        \n        // User conditions\n        fetchWithTimeout(\n          supabase\n            .from('user_conditions')\n            .select('condition_name')\n            .eq('user_id', user.id),\n          3000\n        ).then(result => {\n          setQueriesInProgress(prev => prev - 1);\n          return result;\n        }).catch(error => {\n          console.error('Error fetching conditions:', error);\n          setQueriesInProgress(prev => prev - 1);\n          return { data: [], error: null }; // Default to empty array\n        }),\n        \n        // User allergies\n        fetchWithTimeout(\n          supabase\n            .from('user_allergies')\n            .select('allergy_name')\n            .eq('user_id', user.id),\n          3000\n        ).then(result => {\n          setQueriesInProgress(prev => prev - 1);\n          return result;\n        }).catch(error => {\n          console.error('Error fetching allergies:', error);\n          setQueriesInProgress(prev => prev - 1);\n          return { data: [], error: null }; // Default to empty array\n        })\n      ]);\n      \n      // Check if basic user data was retrieved successfully\n      if (userData.error) throw userData.error;\n      \n      // If there's profile data, update the state with it\n      const newUserData = {\n        name: userData.data?.name || \"\",\n        email: userData.data?.email || \"\",\n        avatar: userData.data?.avatar_url || \"/User_4.png\",\n        dob: profileData.data?.date_of_birth || \"\",\n        gender: profileData.data?.gender || \"\",\n        height: profileData.data?.height_cm?.toString() || \"\",\n        weight: profileData.data?.weight_kg?.toString() || \"\",\n        bloodType: profileData.data?.blood_type || \"\",\n        allergies: allergiesData.data?.map(a => a.allergy_name) || [],\n        conditions: conditionsData.data?.map(c => c.condition_name) || [],\n        goalSteps: profileData.data?.goal_steps || 10000,\n        goalSleep: profileData.data?.goal_sleep_hours || 8,\n        goalWater: profileData.data?.goal_water_ml || 2000\n      };\n      \n      // Store the retrieved profile data in localStorage for faster access next time\n      try {\n        localStorage.setItem(`profile_cache_${user.id}`, JSON.stringify({\n          data: newUserData,\n          timestamp: Date.now()\n        }));\n      } catch (e) {\n        // Ignore storage errors\n        console.log('Error caching profile data:', e);\n      }\n      \n      setUserData(newUserData);\n    } catch (error) {\n      console.error('Error fetching user data:', error.message);\n      setErrorMessage('Failed to load profile data. Please try again later.');\n      \n      // Try to use cached data if available\n      try {\n        const cachedData = localStorage.getItem(`profile_cache_${user.id}`);\n        if (cachedData) {\n          const parsed = JSON.parse(cachedData);\n          if (parsed.data) {\n            console.log('Using cached profile data due to fetch error');\n            setUserData(parsed.data);\n          }\n        }\n      } catch (e) {\n        // Ignore cache errors\n        console.log('Error reading cached profile data:', e);\n      }\n    } finally {\n      // Only set loading to false when all queries are complete\n      if (queriesInProgress === 0) {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  // Helper function for request timeouts\n  const fetchWithTimeout = async (promise, timeoutMs = 5000) => {\n    let timer;\n    const timeoutPromise = new Promise((_, reject) => {\n      timer = setTimeout(() => reject(new Error('Request timed out')), timeoutMs);\n    });\n    \n    try {\n      const result = await Promise.race([promise, timeoutPromise]);\n      clearTimeout(timer);\n      return result;\n    } catch (error) {\n      clearTimeout(timer);\n      throw error;\n    }\n  };\n  \n  // Effect to turn off loading when all queries complete\n  useEffect(() => {\n    if (queriesInProgress === 0 && isLoading) {\n      setIsLoading(false);\n    }\n  }, [queriesInProgress]);\n  \n  // Save user data to Supabase\n  const saveUserData = async () => {\n    // If demo account, just show success UI without saving\n    if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n      return;\n    }\n    \n    setIsLoading(true);\n    setErrorMessage('');\n    \n    try {\n      // Update user table\n      const { error: userError } = await supabase\n        .from('users')\n        .update({ \n          name: userData.name,\n          // Note: Email updates may require additional verification\n        })\n        .eq('user_id', user.id);\n      \n      if (userError) throw userError;\n      \n      // Check if user_profile_metrics record exists\n      const { data: existingProfile } = await supabase\n        .from('user_profile_metrics')\n        .select('user_profile_id')\n        .eq('user_id', user.id)\n        .single();\n      \n      // Prepare profile metrics data\n      const profileData = {\n        user_id: user.id,\n        date_of_birth: userData.dob || null,\n        gender: userData.gender || null,\n        blood_type: userData.bloodType || null,\n        height_cm: userData.height ? parseInt(userData.height) : null,\n        weight_kg: userData.weight ? parseInt(userData.weight) : null,\n        goal_steps: userData.goalSteps,\n        goal_sleep_hours: userData.goalSleep,\n        goal_water_ml: userData.goalWater,\n        updated_at: new Date().toISOString()\n      };\n      \n      // Update or insert profile metrics\n      if (existingProfile) {\n        const { error: updateError } = await supabase\n          .from('user_profile_metrics')\n          .update(profileData)\n          .eq('user_id', user.id);\n          \n        if (updateError) throw updateError;\n      } else {\n        const { error: insertError } = await supabase\n          .from('user_profile_metrics')\n          .insert([profileData]);\n          \n        if (insertError) throw insertError;\n      }\n      \n      // Handle conditions - first delete existing ones\n      await supabase\n        .from('user_conditions')\n        .delete()\n        .eq('user_id', user.id);\n      \n      // Then insert new conditions\n      if (userData.conditions.length > 0) {\n        const conditionsToInsert = userData.conditions.map(condition => ({\n          user_id: user.id,\n          condition_name: condition,\n          created_at: new Date().toISOString()\n        }));\n        \n        const { error: conditionsError } = await supabase\n          .from('user_conditions')\n          .insert(conditionsToInsert);\n          \n        if (conditionsError) throw conditionsError;\n      }\n      \n      // Handle allergies - first delete existing ones\n      await supabase\n        .from('user_allergies')\n        .delete()\n        .eq('user_id', user.id);\n      \n      // Then insert new allergies\n      if (userData.allergies.length > 0) {\n        const allergiesToInsert = userData.allergies.map(allergy => ({\n          user_id: user.id,\n          allergy_name: allergy,\n          created_at: new Date().toISOString()\n        }));\n        \n        const { error: allergiesError } = await supabase\n          .from('user_allergies')\n          .insert(allergiesToInsert);\n          \n        if (allergiesError) throw allergiesError;\n      }\n      \n      // Update local cache\n      try {\n        localStorage.setItem(`profile_cache_${user.id}`, JSON.stringify({\n          data: userData,\n          timestamp: Date.now()\n        }));\n      } catch (e) {\n        // Ignore storage errors\n      }\n      \n      // Show success message\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n      \n    } catch (error) {\n      console.error('Error saving user data:', error);\n      setErrorMessage('Failed to save profile changes. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Save preferences to Supabase\n  const savePreferences = async (updatedPrefs) => {\n    // For demo accounts, just update local state without database calls\n    if (isDemoAccount || user.email === 'demo@healthsync.com' || user.email === 'doctor@healthsync.com') {\n      return;\n    }\n    \n    try {\n      // Check if user_preferences record exists\n      const { data: existingPrefs } = await supabase\n        .from('user_preferences')\n        .select('user_preferences_id')\n        .eq('user_id', user.id)\n        .single();\n      \n      // Prepare preferences data\n      const prefsData = {\n        user_id: user.id,\n        enable_notifications: updatedPrefs.notifications,\n        enable_reminders: updatedPrefs.reminders,\n        enable_biometrics: updatedPrefs.biometrics,\n        enable_dark_mode: updatedPrefs.darkMode,\n        enable_data_sharing: updatedPrefs.dataSharing,\n        updated_at: new Date().toISOString()\n      };\n      \n      // Update or insert preferences\n      if (existingPrefs) {\n        await supabase\n          .from('user_preferences')\n          .update(prefsData)\n          .eq('user_id', user.id);\n      } else {\n        await supabase\n          .from('user_preferences')\n          .insert([prefsData]);\n      }\n    } catch (error) {\n      console.error('Error saving preferences:', error);\n    }\n  };\n  \n  // Handle preference toggles and save to Supabase\n  const handlePreferenceToggle = (key) => {\n    const updatedPrefs = { ...preferences, [key]: !preferences[key] };\n    \n    // Toggle the local state\n    handleToggle(key);\n    \n    // Save to Supabase\n    if (user?.id) {\n      savePreferences(updatedPrefs);\n    }\n  };\n  \n  useEffect(() => {\n    // Set a random sassy tip only once when the component mounts\n    const randomTip = sassyTips[Math.floor(Math.random() * sassyTips.length)];\n    setSassyTip(randomTip);\n  \n    const handleMouseMove = (e) => {\n      const { clientX, clientY } = e;\n      const x = (clientX / window.innerWidth) - 0.5;\n      const y = (clientY / window.innerHeight) - 0.5;\n      setMousePosition({ x, y });\n    };\n  \n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, []);\n  \n  const handleLogout = async () => {\n    try {\n      await signOut();\n      setIsAuthenticated(false);\n      setActiveScreen('signin');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n  \n  const handleSave = () => {\n    if (user?.id) {\n      saveUserData();\n    } else {\n      // Demo mode or no user ID - just show success UI\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setSaveSuccess(false);\n        setEditMode(false);\n      }, 1500);\n    }\n  };\n  \n  // Add a condition\n  const addCondition = (condition) => {\n    if (condition && !userData.conditions.includes(condition)) {\n      setUserData({\n        ...userData,\n        conditions: [...userData.conditions, condition]\n      });\n    }\n  };\n  \n  // Remove a condition\n  const removeCondition = (condition) => {\n    setUserData({\n      ...userData,\n      conditions: userData.conditions.filter(c => c !== condition)\n    });\n  };\n  \n  // Add an allergy\n  const addAllergy = (allergy) => {\n    if (allergy && !userData.allergies.includes(allergy)) {\n      setUserData({\n        ...userData,\n        allergies: [...userData.allergies, allergy]\n      });\n    }\n  };\n  \n  // Remove an allergy\n  const removeAllergy = (allergy) => {\n    setUserData({\n      ...userData,\n      allergies: userData.allergies.filter(a => a !== allergy)\n    });\n  };\n  \n  // Generate a random number between min and max\n  const random = (min, max) => Math.random() * (max - min) + min;\n  \n  // Generate a set of floating orbs for background\n  const generateOrbs = (count) => {\n    return [...Array(count)].map((_, i) => ({\n      id: i,\n      size: random(50, 120),\n      x: random(0, 100),\n      y: random(0, 100),\n      delay: random(0, 5),\n      duration: random(15, 25)\n    }));\n  };\n  \n  const orbs = generateOrbs(6);\n  \n  // Show a simplified loading state UI\n  if (isLoading && !userData.name) {\n    return (\n      <div className=\"p-6 h-full flex flex-col items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 mb-4 relative\">\n            <div className=\"absolute inset-0 rounded-full border-4 border-blue-200 opacity-25\"></div>\n            <div className=\"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin\"></div>\n          </div>\n          <p className=\"text-blue-200\">Loading your profile...</p>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"p-6 pb-8 h-full overflow-auto relative dark-mode-transition\"\n         style={{\n           background: `radial-gradient(circle at 70% 20%, ${colors.primary}20, transparent 50%),\n                       radial-gradient(circle at 30% 80%, ${colors.accent}20, transparent 50%)`,\n         }}>\n      {/* Animated floating background orbs - adjusted for dark mode compatibility */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        {orbs.map((orb) => (\n          <div \n            key={orb.id}\n            className=\"absolute rounded-full opacity-10 dark-mode-transition\"\n            style={{\n              width: orb.size + 'px',\n              height: orb.size + 'px',\n              left: orb.x + '%',\n              top: orb.y + '%',\n              background: `linear-gradient(135deg, ${colors.primary}80, ${colors.accent}60)`,\n              filter: 'blur(20px)',\n              animation: `floatOrb ${orb.duration}s ease-in-out infinite`,\n              animationDelay: `${orb.delay}s`,\n              transform: `translate3d(${mousePosition.x * -15}px, ${mousePosition.y * -15}px, 0)`\n            }}\n          />\n        ))}\n      </div>\n      \n      <header className=\"flex justify-between items-center mb-8 z-10 relative\">\n        <div>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-br from-white via-blue-300 to-blue-500 bg-clip-text text-transparent\">Profile</h1>\n          <p className=\"text-sm text-blue-200\">Manage your account or whatever</p>\n        </div>\n        <button \n          onClick={handleLogout}\n          className=\"w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 relative overflow-hidden group tooltip-container\" \n          style={{ \n            background: `linear-gradient(135deg, ${colors.danger}, ${colors.gradientAlt2})`,\n            boxShadow: `0 0 15px ${colors.danger}40`\n          }}>\n          <span className=\"tooltip\">Log Out</span>\n          <div className=\"absolute inset-0 bg-black bg-opacity-20 scale-0 group-hover:scale-100 transition-transform duration-300 rounded-full\"></div>\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"z-10\">\n            <path d=\"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4\" />\n            <polyline points=\"16 17 21 12 16 7\" />\n            <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" />\n          </svg>\n        </button>\n      </header>\n      \n      {/* Error message */}\n      {errorMessage && (\n        <ProfileNotification \n          message={errorMessage} \n          type=\"error\" \n          onClose={() => setErrorMessage('')} \n          colors={colors}\n        />\n      )}\n      \n      {/* Sassy tip notification */}\n      {sassyTip && !saveSuccess && !errorMessage && (\n        <ProfileNotification \n          message={sassyTip} \n          type=\"info\" \n          onClose={() => setSassyTip('')} \n          colors={colors}\n        />\n      )}\n      \n      {/* Success message */}\n      {saveSuccess && (\n        <ProfileNotification \n          message=\"Profile updated! Looking good there, superstar.\" \n          type=\"success\" \n          colors={colors}\n        />\n      )}\n      \n      {/* User Profile Summary Card */}\n      <ProfileSummaryCard \n        userData={userData} \n        editMode={editMode} \n        setEditMode={setEditMode} \n        handleSave={handleSave} \n        mousePosition={mousePosition} \n        colors={colors} \n      />\n      \n      {/* Profile Navigation Tabs */}\n      <ProfileTabs \n        activeTab={activeTab} \n        setActiveTab={setActiveTab} \n        hoveredTab={hoveredTab} \n        setHoveredTab={setHoveredTab} \n        colors={colors} \n      />\n      \n      {/* Content area with glass effect - enhanced for dark mode */}\n      <div className=\"relative\">\n        <div className=\"absolute -inset-4 rounded-3xl opacity-10 bg-blue-500 blur-2xl dark-mode-transition\"></div>\n        <div className=\"relative p-6 rounded-2xl backdrop-blur-md border border-white border-opacity-10 min-h-[400px] dark-mode-transition\"\n             style={{ \n               background: 'rgba(13, 22, 47, 0.7)', \n               boxShadow: `0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 0 15px ${colors.primary}30`\n             }}>\n          \n          {/* Account Tab */}\n          <div className={`transition-all duration-700 ${activeTab === 'account' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`}>\n            <AccountTab \n              userData={userData} \n              setUserData={setUserData} \n              editMode={editMode} \n              colors={colors} \n              isLoading={isLoading} \n            />\n          </div>\n          \n          {/* Health Tab */}\n          <div className={`transition-all duration-700 ${activeTab === 'health' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`}>\n            <HealthTab \n              userData={userData} \n              setUserData={setUserData} \n              editMode={editMode} \n              colors={colors}\n              addCondition={addCondition}\n              removeCondition={removeCondition}\n              addAllergy={addAllergy}\n              removeAllergy={removeAllergy}\n              isLoading={isLoading}\n            />\n          </div>\n          \n          {/* Preferences Tab - Updated to use handlePreferenceToggle */}\n          <div className={`transition-all duration-700 ${activeTab === 'preferences' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`}>\n            <PreferencesTab \n              preferences={preferences} \n              handleToggle={handlePreferenceToggle} \n              colors={colors} \n            />\n          </div>\n          \n          {/* Privacy Tab - Updated to use handlePreferenceToggle */}\n          <div className={`transition-all duration-700 ${activeTab === 'privacy' ? 'opacity-100' : 'opacity-0 absolute inset-0 pointer-events-none'}`}>\n            <PrivacyTab \n              preferences={preferences} \n              handleToggle={handlePreferenceToggle} \n              colors={colors} \n            />\n          </div>\n        </div>\n      </div>\n      \n      <style jsx>{`\n        @keyframes gradientShift {\n          0% { background-position: 0% 50% }\n          50% { background-position: 100% 50% }\n          100% { background-position: 0% 50% }\n        }\n        @keyframes shimmerButtonEffect {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        @keyframes shimmerEffect {\n          100% { transform: translateX(100%); }\n        }\n        @keyframes floatOrb {\n          0% { transform: translateY(0px) translateX(0px); }\n          50% { transform: translateY(-30px) translateX(20px); }\n          100% { transform: translateY(0px) translateX(0px); }\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes bounce-subtle {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-5px); }\n        }\n        .animate-fadein {\n          animation: fadeIn 0.5s ease-in-out;\n        }\n        .animate-bounce-subtle {\n          animation: bounce-subtle 4s ease-in-out infinite;\n        }\n        .tooltip-container {\n          position: relative;\n        }\n        .tooltip {\n          position: absolute;\n          top: -30px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: rgba(0, 0, 0, 0.7);\n          color: white;\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          opacity: 0;\n          transition: opacity 0.3s;\n          pointer-events: none;\n          white-space: nowrap;\n          z-index: 50;\n        }\n        .tooltip-container:hover .tooltip {\n          opacity: 1;\n        }\n        .tooltip:after {\n          content: '';\n          position: absolute;\n          top: 100%;\n          left: 50%;\n          margin-left: -5px;\n          border-width: 5px;\n          border-style: solid;\n          border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;\n        }\n        input::placeholder, select::placeholder {\n          color: rgba(255, 255, 255, 0.5);\n        }\n        input[type=\"range\"] {\n          -webkit-appearance: none;\n          height: 8px;\n          border-radius: 5px;\n          background: rgba(30, 64, 175, 0.3);\n        }\n        input[type=\"range\"]::-webkit-slider-thumb {\n          -webkit-appearance: none;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #3B82F6, #06B6D4);\n          box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n        input[type=\"range\"]::-webkit-slider-thumb:active {\n          transform: scale(1.2);\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default ProfileScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}