{"ast":null,"code":"var _jsxFileName = \"/Users/ang/V_Hack_Ver4/frontend2/src/components/ApiMiddleware.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from 'react';\nimport { AlertTriangle, Loader } from 'lucide-react';\nimport api from './ApiClient';\nimport { useTheme } from './ThemeContext';\n\n// Create API middleware context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ApiMiddlewareContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the API middleware context\nexport const useApiMiddleware = () => {\n  _s();\n  return useContext(ApiMiddlewareContext);\n};\n_s(useApiMiddleware, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ApiMiddlewareProvider = ({\n  children,\n  colors\n}) => {\n  _s2();\n  const {\n    isDarkMode\n  } = useTheme();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Wrapper for API calls to handle loading and errors\n  const callApi = async (apiFunction, ...args) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const result = await apiFunction(...args);\n      return result;\n    } catch (err) {\n      setError(err.message || 'An unknown error occurred');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Wrapper functions for all API calls\n  const authenticateGoogleFit = authCode => {\n    return callApi(api.authenticateGoogleFit, authCode);\n  };\n  const fetchHealthData = options => {\n    return callApi(api.fetchHealthData, options);\n  };\n  const getHealthInsight = data => {\n    return callApi(api.getHealthInsight, data);\n  };\n  const getBiorhythmAdvice = (chronotype, medicationTime) => {\n    return callApi(api.getBiorhythmAdvice, chronotype, medicationTime);\n  };\n  const submitSymptom = symptomData => {\n    return callApi(api.submitSymptom, symptomData);\n  };\n  const getPrediction = healthMetrics => {\n    return callApi(api.getPrediction, healthMetrics);\n  };\n\n  // Clear error state\n  const clearError = () => {\n    setError(null);\n  };\n\n  // Value to be provided to consuming components\n  const value = {\n    isLoading,\n    error,\n    clearError,\n    authenticateGoogleFit,\n    fetchHealthData,\n    getHealthInsight,\n    getBiorhythmAdvice,\n    submitSymptom,\n    getPrediction\n  };\n  return /*#__PURE__*/_jsxDEV(ApiMiddlewareContext.Provider, {\n    value: value,\n    children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 rounded-2xl shadow-lg animate-pulse dark-mode-transition\",\n        style: {\n          backgroundColor: isDarkMode ? colors.cardBg : 'white',\n          boxShadow: `0 20px 25px -5px ${colors.primary}30`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Loader, {\n            size: 24,\n            className: \"animate-spin mr-3\",\n            style: {\n              color: colors.primary\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg font-medium dark-mode-transition\",\n            style: {\n              color: colors.textPrimary\n            },\n            children: \"Processing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-5 left-0 right-0 mx-auto w-max z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 rounded-xl shadow-lg flex items-center max-w-md animate-bounce-in dark-mode-transition\",\n        style: {\n          backgroundColor: isDarkMode ? colors.cardBg : 'white',\n          borderLeft: `4px solid ${colors.danger}`,\n          boxShadow: `0 10px 15px -3px ${colors.danger}30`\n        },\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          size: 20,\n          className: \"mr-3\",\n          style: {\n            color: colors.danger\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-sm mb-1 dark-mode-transition\",\n            style: {\n              color: colors.textPrimary\n            },\n            children: \"Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs dark-mode-transition\",\n            style: {\n              color: colors.textSecondary\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ml-4 p-2 rounded-full transition-colors duration-300 dark-mode-transition\",\n          style: {\n            backgroundColor: isDarkMode ? `${colors.danger}20` : `${colors.danger}10`,\n            color: colors.danger\n          },\n          onClick: clearError,\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), children, /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes bounce-in {\n          0% { transform: translateY(20px); opacity: 0; }\n          100% { transform: translateY(0); opacity: 1; }\n        }\n        .animate-bounce-in {\n          animation: bounce-in 0.3s ease-out forwards;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s2(ApiMiddlewareProvider, \"RO/MhaUKB45+OPYHpcduwRhOSeU=\", false, function () {\n  return [useTheme];\n});\n_c = ApiMiddlewareProvider;\nexport default ApiMiddlewareProvider;\nvar _c;\n$RefreshReg$(_c, \"ApiMiddlewareProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","AlertTriangle","Loader","api","useTheme","jsxDEV","_jsxDEV","ApiMiddlewareContext","useApiMiddleware","_s","ApiMiddlewareProvider","children","colors","_s2","isDarkMode","isLoading","setIsLoading","error","setError","callApi","apiFunction","args","result","err","message","authenticateGoogleFit","authCode","fetchHealthData","options","getHealthInsight","data","getBiorhythmAdvice","chronotype","medicationTime","submitSymptom","symptomData","getPrediction","healthMetrics","clearError","value","Provider","className","style","backgroundColor","cardBg","boxShadow","primary","size","color","fileName","_jsxFileName","lineNumber","columnNumber","textPrimary","borderLeft","danger","textSecondary","onClick","jsx","_c","$RefreshReg$"],"sources":["/Users/ang/V_Hack_Ver4/frontend2/src/components/ApiMiddleware.jsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\nimport { AlertTriangle, Loader } from 'lucide-react';\nimport api from './ApiClient';\nimport { useTheme } from './ThemeContext';\n\n// Create API middleware context\nconst ApiMiddlewareContext = createContext();\n\n// Custom hook to use the API middleware context\nexport const useApiMiddleware = () => {\n  return useContext(ApiMiddlewareContext);\n};\n\nexport const ApiMiddlewareProvider = ({ children, colors }) => {\n  const { isDarkMode } = useTheme();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  // Wrapper for API calls to handle loading and errors\n  const callApi = async (apiFunction, ...args) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const result = await apiFunction(...args);\n      return result;\n    } catch (err) {\n      setError(err.message || 'An unknown error occurred');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Wrapper functions for all API calls\n  const authenticateGoogleFit = (authCode) => {\n    return callApi(api.authenticateGoogleFit, authCode);\n  };\n  \n  const fetchHealthData = (options) => {\n    return callApi(api.fetchHealthData, options);\n  };\n  \n  const getHealthInsight = (data) => {\n    return callApi(api.getHealthInsight, data);\n  };\n  \n  const getBiorhythmAdvice = (chronotype, medicationTime) => {\n    return callApi(api.getBiorhythmAdvice, chronotype, medicationTime);\n  };\n  \n  const submitSymptom = (symptomData) => {\n    return callApi(api.submitSymptom, symptomData);\n  };\n  \n  const getPrediction = (healthMetrics) => {\n    return callApi(api.getPrediction, healthMetrics);\n  };\n  \n  // Clear error state\n  const clearError = () => {\n    setError(null);\n  };\n  \n  // Value to be provided to consuming components\n  const value = {\n    isLoading,\n    error,\n    clearError,\n    authenticateGoogleFit,\n    fetchHealthData,\n    getHealthInsight,\n    getBiorhythmAdvice,\n    submitSymptom,\n    getPrediction\n  };\n  \n  return (\n    <ApiMiddlewareContext.Provider value={value}>\n      {/* Loading overlay */}\n      {isLoading && (\n        <div className=\"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50\">\n          <div className=\"p-6 rounded-2xl shadow-lg animate-pulse dark-mode-transition\"\n               style={{ \n                 backgroundColor: isDarkMode ? colors.cardBg : 'white',\n                 boxShadow: `0 20px 25px -5px ${colors.primary}30`\n               }}>\n            <div className=\"flex items-center\">\n              <Loader size={24} className=\"animate-spin mr-3\" style={{ color: colors.primary }} />\n              <span className=\"text-lg font-medium dark-mode-transition\" style={{ color: colors.textPrimary }}>\n                Processing...\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Error toast */}\n      {error && (\n        <div className=\"fixed bottom-5 left-0 right-0 mx-auto w-max z-50\">\n          <div className=\"p-4 rounded-xl shadow-lg flex items-center max-w-md animate-bounce-in dark-mode-transition\"\n               style={{ \n                 backgroundColor: isDarkMode ? colors.cardBg : 'white',\n                 borderLeft: `4px solid ${colors.danger}`,\n                 boxShadow: `0 10px 15px -3px ${colors.danger}30`\n               }}>\n            <AlertTriangle size={20} className=\"mr-3\" style={{ color: colors.danger }} />\n            <div className=\"flex-1\">\n              <h4 className=\"font-medium text-sm mb-1 dark-mode-transition\" style={{ color: colors.textPrimary }}>\n                Error\n              </h4>\n              <p className=\"text-xs dark-mode-transition\" style={{ color: colors.textSecondary }}>\n                {error}\n              </p>\n            </div>\n            <button \n              className=\"ml-4 p-2 rounded-full transition-colors duration-300 dark-mode-transition\"\n              style={{ \n                backgroundColor: isDarkMode ? `${colors.danger}20` : `${colors.danger}10`,\n                color: colors.danger\n              }}\n              onClick={clearError}\n            >\n              âœ•\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {children}\n      \n      <style jsx>{`\n        @keyframes bounce-in {\n          0% { transform: translateY(20px); opacity: 0; }\n          100% { transform: translateY(0); opacity: 1; }\n        }\n        .animate-bounce-in {\n          animation: bounce-in 0.3s ease-out forwards;\n        }\n      `}</style>\n    </ApiMiddlewareContext.Provider>\n  );\n};\n\nexport default ApiMiddlewareProvider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}