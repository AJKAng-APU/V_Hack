{"ast":null,"code":"var _jsxFileName = \"/Users/ang/V_Hack_Ver3/frontend2/src/components/screens/GlobalCallUI.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { Phone, Mic, MicOff, Video, VideoOff, X } from 'lucide-react';\nimport useGlobalCallStore from '../services/GlobalCallService';\nimport { useTheme } from '../ThemeContext';\nimport webRTCService from '../services/WebRTCService';\n\n/**\n * Call UI that can be shown from anywhere in the app\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalCallUI = () => {\n  _s();\n  var _remoteVideoRef$curre;\n  const {\n    colors,\n    isDarkMode\n  } = useTheme();\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n\n  // Get data and functions from global call store\n  const {\n    showCallUI,\n    selectedDoctor,\n    callState,\n    endCall,\n    closeCallUI,\n    incomingCall,\n    acceptIncomingCall,\n    declineIncomingCall\n  } = useGlobalCallStore();\n\n  // UI states\n  const [isMuted, setIsMuted] = React.useState(false);\n  const [isVideoOff, setIsVideoOff] = React.useState(false);\n  const [callDuration, setCallDuration] = React.useState(0);\n  const callTimerRef = useRef(null);\n\n  // Handle toggling audio\n  const toggleAudio = () => {\n    setIsMuted(!isMuted);\n    if (webRTCService) {\n      webRTCService.toggleAudio(!isMuted);\n    }\n  };\n\n  // Handle toggling video\n  const toggleVideo = () => {\n    setIsVideoOff(!isVideoOff);\n    if (webRTCService) {\n      webRTCService.toggleVideo(!isVideoOff);\n    }\n  };\n\n  // Connect video elements to streams when available\n  useEffect(() => {\n    // Only set up video elements if call UI is visible\n    if (!showCallUI && !incomingCall) return;\n    const setupVideoElements = () => {\n      // Setup callbacks for WebRTC service\n      if (webRTCService) {\n        webRTCService.updateCallbacks({\n          onLocalStream: stream => {\n            console.log('Local stream received in GlobalCallUI');\n            if (localVideoRef.current) {\n              localVideoRef.current.srcObject = stream;\n              localVideoRef.current.play().catch(e => console.error('Error playing local video:', e));\n            }\n          },\n          onRemoteStream: stream => {\n            console.log('Remote stream received in GlobalCallUI');\n            if (remoteVideoRef.current) {\n              remoteVideoRef.current.srcObject = stream;\n              remoteVideoRef.current.play().catch(e => console.error('Error playing remote video:', e));\n            }\n          },\n          onCallStarted: () => {\n            console.log('Call started in GlobalCallUI');\n            // Start timer for call duration\n            if (callTimerRef.current) {\n              clearInterval(callTimerRef.current);\n            }\n            callTimerRef.current = setInterval(() => {\n              setCallDuration(prev => prev + 1);\n            }, 1000);\n          },\n          onCallEnded: () => {\n            console.log('Call ended in GlobalCallUI');\n            // Clear timer\n            if (callTimerRef.current) {\n              clearInterval(callTimerRef.current);\n              callTimerRef.current = null;\n            }\n          }\n        });\n\n        // Attach existing streams if available\n        if (webRTCService.mediaManager && webRTCService.mediaManager.localStream) {\n          const localStream = webRTCService.mediaManager.localStream;\n          if (localVideoRef.current) {\n            localVideoRef.current.srcObject = localStream;\n            localVideoRef.current.play().catch(e => console.error('Error playing local video:', e));\n          }\n        }\n        if (webRTCService.connectionManager && webRTCService.connectionManager.remoteStream) {\n          const remoteStream = webRTCService.connectionManager.remoteStream;\n          if (remoteVideoRef.current) {\n            remoteVideoRef.current.srcObject = remoteStream;\n            remoteVideoRef.current.play().catch(e => console.error('Error playing remote video:', e));\n          }\n        }\n      }\n    };\n    setupVideoElements();\n    return () => {\n      // Clear timer when component unmounts\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n        callTimerRef.current = null;\n      }\n    };\n  }, [showCallUI, incomingCall]);\n\n  // Format call duration as MM:SS\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // If neither call UI nor incoming call should be shown, return null\n  if (!showCallUI && !incomingCall) {\n    return null;\n  }\n\n  // If there's an incoming call, show the incoming call UI\n  if (incomingCall) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-2xl max-w-md w-full mx-4 animate-bounce-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-28 h-28 rounded-full mx-auto mb-4 relative overflow-hidden border-4 animate-pulse\",\n            style: {\n              borderColor: colors.primary\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: incomingCall.doctor.image,\n              alt: incomingCall.doctor.name,\n              className: \"w-full h-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full h-full bg-black bg-opacity-20 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 h-20 rounded-full border-4 border-white border-opacity-60 border-t-transparent animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-bold mb-2 dark:text-white\",\n            children: incomingCall.doctor.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-md text-gray-500 dark:text-gray-300 mb-6 animate-pulse\",\n            children: \"Incoming video call...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-18 h-18 rounded-full flex items-center justify-center shadow-lg transform transition-transform hover:scale-110\",\n              style: {\n                backgroundColor: colors.danger\n              },\n              onClick: declineIncomingCall,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-16 h-16 rounded-full flex items-center justify-center bg-red-600\",\n                children: /*#__PURE__*/_jsxDEV(Phone, {\n                  size: 30,\n                  className: \"text-white transform rotate-135\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-18 h-18 rounded-full flex items-center justify-center shadow-lg transform transition-transform hover:scale-110\",\n              style: {\n                backgroundColor: colors.success\n              },\n              onClick: acceptIncomingCall,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-16 h-16 rounded-full flex items-center justify-center bg-green-600 animate-pulse\",\n                children: /*#__PURE__*/_jsxDEV(Phone, {\n                  size: 30,\n                  className: \"text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show the call UI\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90\",\n    children: [callState === 'connecting' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex flex-col items-center justify-center z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-20 h-20 rounded-full mb-4 overflow-hidden relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.image,\n          alt: selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.name,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-medium text-white mb-2\",\n        children: [\"Connecting to \", selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.name, \"...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this), callState === 'ended' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex flex-col items-center justify-center z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-20 h-20 rounded-full bg-red-500 bg-opacity-20 flex items-center justify-center mb-6\",\n        children: /*#__PURE__*/_jsxDEV(Phone, {\n          size: 32,\n          className: \"text-red-500 transform rotate-135\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-white mb-2\",\n        children: \"Call Ended\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-white text-opacity-70\",\n        children: [\"Duration: \", formatTime(callDuration)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full h-full max-w-2xl max-h-[80vh] rounded-xl overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: remoteVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), (callState === 'connecting' || !((_remoteVideoRef$curre = remoteVideoRef.current) !== null && _remoteVideoRef$curre !== void 0 && _remoteVideoRef$curre.srcObject)) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-gradient-to-b from-blue-900 to-black flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-32 h-32 rounded-full overflow-hidden border-4 border-white border-opacity-20\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.image,\n              alt: selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.name,\n              className: \"w-full h-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-24 right-4 w-32 h-48 rounded-xl overflow-hidden border-4 border-white shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: localVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), isVideoOff && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-gradient-to-b from-gray-800 to-black flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 rounded-full bg-white bg-opacity-10 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(Video, {\n              size: 20,\n              className: \"text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-0 left-0 right-0 p-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-white\",\n            children: selectedDoctor === null || selectedDoctor === void 0 ? void 0 : selectedDoctor.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-white text-opacity-70\",\n            children: callState === 'active' ? formatTime(callDuration) : callState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-8 h-8 rounded-full bg-black bg-opacity-50 flex items-center justify-center\",\n          onClick: closeCallUI,\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 18,\n            className: \"text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-6 left-0 right-0 flex justify-center items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\",\n          style: {\n            backgroundColor: isMuted ? colors.danger : 'rgba(255, 255, 255, 0.2)',\n            transform: isMuted ? 'scale(1.1)' : 'scale(1)'\n          },\n          onClick: toggleAudio,\n          children: isMuted ? /*#__PURE__*/_jsxDEV(MicOff, {\n            size: 20,\n            className: \"text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n            size: 20,\n            className: \"text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300\",\n          style: {\n            backgroundColor: colors.danger,\n            boxShadow: '0 0 20px rgba(220, 38, 38, 0.5)'\n          },\n          onClick: endCall,\n          children: /*#__PURE__*/_jsxDEV(Phone, {\n            size: 24,\n            className: \"text-white transform rotate-135\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\",\n          style: {\n            backgroundColor: isVideoOff ? colors.danger : 'rgba(255, 255, 255, 0.2)',\n            transform: isVideoOff ? 'scale(1.1)' : 'scale(1)'\n          },\n          onClick: toggleVideo,\n          children: isVideoOff ? /*#__PURE__*/_jsxDEV(VideoOff, {\n            size: 20,\n            className: \"text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Video, {\n            size: 20,\n            className: \"text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n_s(GlobalCallUI, \"HboGQpijOF6dq01jexxy5YvCrNU=\", false, function () {\n  return [useTheme, useGlobalCallStore];\n});\n_c = GlobalCallUI;\nexport default GlobalCallUI;\nvar _c;\n$RefreshReg$(_c, \"GlobalCallUI\");","map":{"version":3,"names":["React","useEffect","useRef","Phone","Mic","MicOff","Video","VideoOff","X","useGlobalCallStore","useTheme","webRTCService","jsxDEV","_jsxDEV","GlobalCallUI","_s","_remoteVideoRef$curre","colors","isDarkMode","localVideoRef","remoteVideoRef","showCallUI","selectedDoctor","callState","endCall","closeCallUI","incomingCall","acceptIncomingCall","declineIncomingCall","isMuted","setIsMuted","useState","isVideoOff","setIsVideoOff","callDuration","setCallDuration","callTimerRef","toggleAudio","toggleVideo","setupVideoElements","updateCallbacks","onLocalStream","stream","console","log","current","srcObject","play","catch","e","error","onRemoteStream","onCallStarted","clearInterval","setInterval","prev","onCallEnded","mediaManager","localStream","connectionManager","remoteStream","formatTime","seconds","mins","Math","floor","secs","toString","padStart","className","children","style","borderColor","primary","src","doctor","image","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","danger","onClick","size","success","ref","autoPlay","playsInline","muted","transform","boxShadow","_c","$RefreshReg$"],"sources":["/Users/ang/V_Hack_Ver3/frontend2/src/components/screens/GlobalCallUI.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Phone, Mic, MicOff, Video, VideoOff, X } from 'lucide-react';\nimport useGlobalCallStore from '../services/GlobalCallService';\nimport { useTheme } from '../ThemeContext';\nimport webRTCService from '../services/WebRTCService';\n\n/**\n * Call UI that can be shown from anywhere in the app\n */\nconst GlobalCallUI = () => {\n  const { colors, isDarkMode } = useTheme();\n  const localVideoRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n  \n  // Get data and functions from global call store\n  const { \n    showCallUI, \n    selectedDoctor, \n    callState, \n    endCall, \n    closeCallUI,\n    incomingCall,\n    acceptIncomingCall,\n    declineIncomingCall\n  } = useGlobalCallStore();\n  \n  // UI states\n  const [isMuted, setIsMuted] = React.useState(false);\n  const [isVideoOff, setIsVideoOff] = React.useState(false);\n  const [callDuration, setCallDuration] = React.useState(0);\n  const callTimerRef = useRef(null);\n  \n  // Handle toggling audio\n  const toggleAudio = () => {\n    setIsMuted(!isMuted);\n    if (webRTCService) {\n      webRTCService.toggleAudio(!isMuted);\n    }\n  };\n  \n  // Handle toggling video\n  const toggleVideo = () => {\n    setIsVideoOff(!isVideoOff);\n    if (webRTCService) {\n      webRTCService.toggleVideo(!isVideoOff);\n    }\n  };\n  \n  // Connect video elements to streams when available\n  useEffect(() => {\n    // Only set up video elements if call UI is visible\n    if (!showCallUI && !incomingCall) return;\n    \n    const setupVideoElements = () => {\n      // Setup callbacks for WebRTC service\n      if (webRTCService) {\n        webRTCService.updateCallbacks({\n          onLocalStream: (stream) => {\n            console.log('Local stream received in GlobalCallUI');\n            if (localVideoRef.current) {\n              localVideoRef.current.srcObject = stream;\n              localVideoRef.current.play().catch(e => console.error('Error playing local video:', e));\n            }\n          },\n          onRemoteStream: (stream) => {\n            console.log('Remote stream received in GlobalCallUI');\n            if (remoteVideoRef.current) {\n              remoteVideoRef.current.srcObject = stream;\n              remoteVideoRef.current.play().catch(e => console.error('Error playing remote video:', e));\n            }\n          },\n          onCallStarted: () => {\n            console.log('Call started in GlobalCallUI');\n            // Start timer for call duration\n            if (callTimerRef.current) {\n              clearInterval(callTimerRef.current);\n            }\n            \n            callTimerRef.current = setInterval(() => {\n              setCallDuration(prev => prev + 1);\n            }, 1000);\n          },\n          onCallEnded: () => {\n            console.log('Call ended in GlobalCallUI');\n            // Clear timer\n            if (callTimerRef.current) {\n              clearInterval(callTimerRef.current);\n              callTimerRef.current = null;\n            }\n          }\n        });\n        \n        // Attach existing streams if available\n        if (webRTCService.mediaManager && webRTCService.mediaManager.localStream) {\n          const localStream = webRTCService.mediaManager.localStream;\n          if (localVideoRef.current) {\n            localVideoRef.current.srcObject = localStream;\n            localVideoRef.current.play().catch(e => console.error('Error playing local video:', e));\n          }\n        }\n        \n        if (webRTCService.connectionManager && webRTCService.connectionManager.remoteStream) {\n          const remoteStream = webRTCService.connectionManager.remoteStream;\n          if (remoteVideoRef.current) {\n            remoteVideoRef.current.srcObject = remoteStream;\n            remoteVideoRef.current.play().catch(e => console.error('Error playing remote video:', e));\n          }\n        }\n      }\n    };\n    \n    setupVideoElements();\n    \n    return () => {\n      // Clear timer when component unmounts\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n        callTimerRef.current = null;\n      }\n    };\n  }, [showCallUI, incomingCall]);\n  \n  // Format call duration as MM:SS\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  \n  // If neither call UI nor incoming call should be shown, return null\n  if (!showCallUI && !incomingCall) {\n    return null;\n  }\n  \n  // If there's an incoming call, show the incoming call UI\n  if (incomingCall) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-2xl max-w-md w-full mx-4 animate-bounce-in\">\n          <div className=\"p-6 text-center\">\n            <div className=\"w-28 h-28 rounded-full mx-auto mb-4 relative overflow-hidden border-4 animate-pulse\" \n                style={{ borderColor: colors.primary }}>\n              <img \n                src={incomingCall.doctor.image} \n                alt={incomingCall.doctor.name} \n                className=\"w-full h-full object-cover\"\n              />\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <div className=\"w-full h-full bg-black bg-opacity-20 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 rounded-full border-4 border-white border-opacity-60 border-t-transparent animate-spin\"></div>\n                </div>\n              </div>\n            </div>\n            \n            <h3 className=\"text-2xl font-bold mb-2 dark:text-white\">{incomingCall.doctor.name}</h3>\n            <p className=\"text-md text-gray-500 dark:text-gray-300 mb-6 animate-pulse\">Incoming video call...</p>\n            \n            <div className=\"flex justify-center space-x-6\">\n              <button \n                className=\"w-18 h-18 rounded-full flex items-center justify-center shadow-lg transform transition-transform hover:scale-110\"\n                style={{ backgroundColor: colors.danger }}\n                onClick={declineIncomingCall}\n              >\n                <div className=\"w-16 h-16 rounded-full flex items-center justify-center bg-red-600\">\n                  <Phone size={30} className=\"text-white transform rotate-135\" />\n                </div>\n              </button>\n              \n              <button \n                className=\"w-18 h-18 rounded-full flex items-center justify-center shadow-lg transform transition-transform hover:scale-110\"\n                style={{ backgroundColor: colors.success }}\n                onClick={acceptIncomingCall}\n              >\n                <div className=\"w-16 h-16 rounded-full flex items-center justify-center bg-green-600 animate-pulse\">\n                  <Phone size={30} className=\"text-white\" />\n                </div>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  // Show the call UI\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90\">\n      {/* Call states */}\n      {callState === 'connecting' && (\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center z-10\">\n          <div className=\"w-20 h-20 rounded-full mb-4 overflow-hidden relative\">\n            <img \n              src={selectedDoctor?.image} \n              alt={selectedDoctor?.name} \n              className=\"w-full h-full object-cover\"\n            />\n            <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\n              <div className=\"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin\"></div>\n            </div>\n          </div>\n          <h3 className=\"text-xl font-medium text-white mb-2\">Connecting to {selectedDoctor?.name}...</h3>\n        </div>\n      )}\n      \n      {callState === 'ended' && (\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center z-10\">\n          <div className=\"w-20 h-20 rounded-full bg-red-500 bg-opacity-20 flex items-center justify-center mb-6\">\n            <Phone size={32} className=\"text-red-500 transform rotate-135\" />\n          </div>\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Call Ended</h3>\n          <p className=\"text-white text-opacity-70\">Duration: {formatTime(callDuration)}</p>\n        </div>\n      )}\n      \n      {/* Video containers */}\n      <div className=\"relative w-full h-full max-w-2xl max-h-[80vh] rounded-xl overflow-hidden\">\n        {/* Remote video (doctor) */}\n        <div className=\"absolute inset-0 bg-black\">\n          <video\n            ref={remoteVideoRef}\n            autoPlay\n            playsInline\n            className=\"w-full h-full object-cover\"\n          />\n          \n          {/* Show doctor avatar if video is unavailable */}\n          {(callState === 'connecting' || !remoteVideoRef.current?.srcObject) && (\n            <div className=\"absolute inset-0 bg-gradient-to-b from-blue-900 to-black flex items-center justify-center\">\n              <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-white border-opacity-20\">\n                <img \n                  src={selectedDoctor?.image} \n                  alt={selectedDoctor?.name} \n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* Local video (patient) */}\n        <div className=\"absolute bottom-24 right-4 w-32 h-48 rounded-xl overflow-hidden border-4 border-white shadow-lg\">\n          <video\n            ref={localVideoRef}\n            autoPlay\n            playsInline\n            muted\n            className=\"w-full h-full object-cover\"\n          />\n          \n          {/* Video off overlay */}\n          {isVideoOff && (\n            <div className=\"absolute inset-0 bg-gradient-to-b from-gray-800 to-black flex items-center justify-center\">\n              <div className=\"w-12 h-12 rounded-full bg-white bg-opacity-10 flex items-center justify-center\">\n                <Video size={20} className=\"text-white\" />\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* Call header */}\n        <div className=\"absolute top-0 left-0 right-0 p-4 flex justify-between items-center\">\n          <div>\n            <h3 className=\"text-lg font-medium text-white\">{selectedDoctor?.name}</h3>\n            <p className=\"text-sm text-white text-opacity-70\">\n              {callState === 'active' ? formatTime(callDuration) : callState}\n            </p>\n          </div>\n          <button\n            className=\"w-8 h-8 rounded-full bg-black bg-opacity-50 flex items-center justify-center\"\n            onClick={closeCallUI}\n          >\n            <X size={18} className=\"text-white\" />\n          </button>\n        </div>\n        \n        {/* Call controls */}\n        <div className=\"absolute bottom-6 left-0 right-0 flex justify-center items-center space-x-4\">\n          <button \n            className=\"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\"\n            style={{ \n              backgroundColor: isMuted ? colors.danger : 'rgba(255, 255, 255, 0.2)',\n              transform: isMuted ? 'scale(1.1)' : 'scale(1)'\n            }}\n            onClick={toggleAudio}\n          >\n            {isMuted ? (\n              <MicOff size={20} className=\"text-white\" />\n            ) : (\n              <Mic size={20} className=\"text-white\" />\n            )}\n          </button>\n          \n          <button \n            className=\"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300\"\n            style={{ \n              backgroundColor: colors.danger,\n              boxShadow: '0 0 20px rgba(220, 38, 38, 0.5)'\n            }}\n            onClick={endCall}\n          >\n            <Phone size={24} className=\"text-white transform rotate-135\" />\n          </button>\n          \n          <button \n            className=\"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300\"\n            style={{ \n              backgroundColor: isVideoOff ? colors.danger : 'rgba(255, 255, 255, 0.2)',\n              transform: isVideoOff ? 'scale(1.1)' : 'scale(1)'\n            }}\n            onClick={toggleVideo}\n          >\n            {isVideoOff ? (\n              <VideoOff size={20} className=\"text-white\" />\n            ) : (\n              <Video size={20} className=\"text-white\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GlobalCallUI; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}